<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prime Tools Admin</title>
<style>
body { font-family: sans-serif; background:#000; color:#fff; padding:20px; }
button,input { width:100%; padding:12px; margin-top:10px; border-radius:8px; }
input { border:1px solid #444; background:#111; color:#fff; }
button { background:#00c853; border:none; font-size:16px; font-weight:bold; }
</style>
</head>

<body>

<h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h2>

<h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
<input id="email" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
<input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="loginAdmin()">Ø¯Ø®ÙˆÙ„ ÙƒØ£Ø¯Ù…Ù†</button>

<div id="adminPanel" style="display:none;">
<h3>Ø¥Ø¶Ø§ÙØ© Ø£Ø¯Ø§Ø©</h3>
<input id="toolName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø¯Ø§Ø©">
<button onclick="addTool()">Ø¥Ø¶Ø§ÙØ©</button>

<div id="tools"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/12.5.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.5.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyCEbKMZHqJQ-UU6Qco7FlAue0E4mCWd4UY",
  authDomain: "prime-tools99.firebaseapp.com",
  projectId: "prime-tools99",
  storageBucket: "prime-tools99.firebasestorage.app",
  messagingSenderId: "112360376529",
  appId: "1:112360376529:web:f5fac1d99a87f7f5a85df0"
});

const auth = firebase.auth();
const db = firebase.firestore();

async function loginAdmin(){
 let email = document.getElementById("email").value;
 let pass = document.getElementById("password").value;

 auth.signInWithEmailAndPassword(email,pass).then(async u=>{
   let uid = u.user.uid;
   let doc = await db.collection("users").doc(uid).get();
   if(!doc.exists) return alert("Ù„ÙŠØ³ Ù…ØµØ±Ø­");
   if(doc.data().isAdmin !== true) return alert("Ù„ÙŠØ³ Ø£Ø¯Ù…Ù† âŒ");
   document.getElementById("adminPanel").style.display = "block";
   loadTools();
 }).catch(e=>alert(e.message));
}

async function addTool(){
 let name = document.getElementById("toolName").value;
 if(!name) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø£Ø¯Ø§Ø©");
 await db.collection("tools").add({name:name});
 alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ…");
 loadTools();
}

function loadTools(){
 db.collection("tools").get().then(s=>{
   let html="";
   s.forEach(d=>{ html+=`<p>ğŸ›  ${d.data().name}</p>`; });
   document.getElementById("tools").innerHTML = html;
 });
}
</script>
</body>
</html>
