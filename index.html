<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prime Tool โ Ahmed</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f0f0f" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://www.gstatic.com" crossorigin>
</head>
<body data-theme="dark">
  <header class="topbar">
    <strong id="appTitle">Prime Tool</strong>
    <div class="right">
      <span class="lang" data-lang="ar">AR</span>|
      <span class="lang" data-lang="en">EN</span>|
      <span class="lang" data-lang="de">DE</span>
      <button class="icon-btn" id="themeToggle" title="Theme">๐</button>
    </div>
  </header>

  <main>
    <!-- ุดุงุดุฉ ุงูุฏุฎูู -->
    <section class="card" id="authScreen">
      <h2 id="t-login">ุชุณุฌูู ุงูุฏุฎูู</h2>
      <div class="grid">
        <input id="email" type="email" placeholder="ุงูุจุฑูุฏ" autocomplete="username" />
        <input id="password" type="password" placeholder="ูููุฉ ุงููุฑูุฑ" autocomplete="current-password" />
        <button id="loginBtn">ุฏุฎูู</button>
      </div>
      <hr />
      <h3 id="t-register">ุชุณุฌูู ุญุณุงุจ ุฌุฏูุฏ</h3>
      <div class="grid">
        <input id="firstName" placeholder="ุงูุงุณู ุงูุฃูู" />
        <input id="lastName" placeholder="ุงุณู ุงูุนุงุฆูุฉ" />
        <input id="address" placeholder="ุงูุนููุงู" />
        <input id="regEmail" type="email" placeholder="ุงูุจุฑูุฏ" autocomplete="email" />
        <input id="regPass" type="password" placeholder="ูููุฉ ุงููุฑูุฑ" autocomplete="new-password" />
        <button id="registerBtn">ุชุณุฌูู</button>
      </div>
      <p class="muted" id="authMsg"></p>
    </section>

    <!-- ุดุงุดุฉ ุงููุณุชุฎุฏู -->
    <section class="card hidden" id="userScreen">
      <div class="row between">
        <h2 id="t-welcome">ูุฑุญุจุงู</h2>
        <div>
          <button class="ghost" id="openScanner">๐ท <span id="t-scan">ูุณุญ QR</span></button>
          <button class="ghost" id="logoutBtn">๐ช <span id="t-logout">ุฎุฑูุฌ</span></button>
        </div>
      </div>
      <div id="userStatus" class="muted"></div>
      <div id="borrowList" class="list"></div>
      <div style="margin-top:10px">
        <input id="manualCode" placeholder="ุฃุฏุฎู ููุฏ ุงูุฃุฏุงุฉ (ุงุฎุชูุงุฑู)" />
        <button id="manualBtn">ุชูููุฐ ูุฏูู</button>
      </div>
    </section>

    <!-- ุดุงุดุฉ ุงูุฃุฏูู -->
    <section class="card hidden" id="adminScreen">
      <div class="row between">
        <h2 id="t-admin">ููุญุฉ ุงูุฃุฏูู</h2>
        <button class="ghost" id="closeAdmin">โ</button>
      </div>
      <div class="row">
        <input id="pinInput" type="password" placeholder="PIN" />
        <button id="unlockBtn"><span id="t-unlock">ูุชุญ</span></button>
        <span id="pinStatus" class="muted"></span>
      </div>
      <div id="adminBody" class="hidden">
        <div class="tabs">
          <button data-tab="pending" class="tab active" id="t-pending">ุทูุจุงุช ุงูุชุณุฌูู</button>
          <button data-tab="tools" class="tab" id="t-tools">ุงูุฃุฏูุงุช</button>
          <button data-tab="history" class="tab" id="t-history">ุงูุณุฌู</button>
          <button data-tab="settings" class="tab" id="t-settings">ุงูุฅุนุฏุงุฏุงุช</button>
        </div>

        <div class="tabcontent" id="tab-pending">
          <div id="pendingList" class="list"></div>
        </div>

        <div class="tabcontent hidden" id="tab-tools"><div class="row">
  <input id="toolName" placeholder="ุงุณู ุงูุฃุฏุงุฉ" />
  <input id="toolImage" type="file" accept="image/*" />
  <button id="addTool">ุฅูุดุงุก</button>
</div><div class="row">
  <input id="toolName" placeholder="ุงุณู ุงูุฃุฏุงุฉ" />
  <input id="toolImage" type="file" accept="image/*" />
  <button id="addTool">ุฅูุดุงุก</button>
</div>
        </div>

        <div class="tabcontent hidden" id="tab-history">
          <div id="historyList" class="list"></div>
        </div>

        <div class="tabcontent hidden" id="tab-settings">
          <div class="row">
            <input id="newPin" placeholder="PIN ุฌุฏูุฏ" />
            <button id="savePin">ุญูุธ PIN</button>
          </div>
          <p class="muted">Admin: Ahmed โ ยฉ Prime Tool System</p>
        </div>
      </div>
    </section>

    <!-- ูุงูุฐุฉ ุงููุงุณุญ -->
    <dialog id="scanModal">
      <div class="row between"><h3 id="t-scanTitle">ูุณุญ QR</h3><button id="closeScan">โ</button></div>
      <div id="qrReader" style="width:100%"></div>
      <p class="muted">ุตูุบุฉ ุงูุฑูุฒ: <code>TOOL:&lt;toolId&gt;</code></p>
    </dialog>
  </main>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- QR libs -->
  <script src="https://unpkg.com/html5-qrcode"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <!-- App -->
  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('service-worker.js'); }
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
</body>
</html>